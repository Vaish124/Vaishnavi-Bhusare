{% comment %}
Custom Product Grid Section
Allows selecting 6 products and displaying them in a grid with popup functionality.
{% endcomment %}

<section class="custom-product-grid">
  <div class="page-width">
    <h2 class="custom-grid-title">{{ section.settings.title }}</h2>
    <div class="custom-grid">
      {% for block in section.blocks %}
        {% if block.settings.product != blank %}
          {% assign product = all_products[block.settings.product] %}
          <div class="custom-grid-item" data-handle="{{ product.handle }}">
            <img src="{{ product.featured_image | img_url: '600x600' }}" alt="{{ product.title }}">
            <div class="custom-grid-item-overlay">
              <button class="quick-view-btn" data-handle="{{ product.handle }}">
                +
              </button>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>

  <!-- Popup -->
  <div class="product-popup" id="product-popup" style="display:none;">
    <div class="product-popup-content">
      <button class="popup-close">&times;</button>
      <div class="popup-body">
        <img id="popup-image" src="" alt="">
        <h3 id="popup-title"></h3>
        <p id="popup-price"></p>
        <p id="popup-description"></p>

        <form id="popup-form">
          <label>Color:</label>
          <div id="popup-colors"></div>

          <label>Size:</label>
          <select id="popup-sizes"></select>

          <button type="submit" class="popup-add-to-cart">ADD TO CART</button>
        </form>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Custom Product Grid",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Grid Title",
      "default": "Tisso vison in the wild"
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select product"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Custom Product Grid",
      "category": "Custom"
    }
  ]
}
{% endschema %}
